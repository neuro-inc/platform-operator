version: "3"
services:

  consul:
    container_name: consul
    image: consul:latest
    ports:
      - 8500:8500
    healthcheck:
      test:
        - CMD
        - /bin/sh
        - -ec
        - curl http://127.0.0.1:8500/v1/status/leader 2>/dev/null | grep -E '".+"'
      interval: 5s
      timeout: 30s
      retries: 3
    user: root
